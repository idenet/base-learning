# react 概念

## 状态提升

当某个状态被多个组件依赖或者影响的时候，可以将这个状态放到最近的公共组件中管理；用 props 传递数据或者函数来管理

### 带来的问题

但是相交的两个组件跨度很大的时候，这种方法就很不好用。这时候就需要引入状态管理工具 redux 或者 mobx

## 高阶组件

高阶组件就是一个函数，传给它一个组件，它返回一个新组件，组件之间通过 props 传递消息，其实就是设计模式中的装饰者模式

作用

1.  复用组件之间的代码
2.  高阶组件非常灵活

### 高阶组件的套路

```
Post = Post = loadAndRefresh('/post')(Post)
```

注意这里，它其实是一种套路，loadAndRefresh 接收一个 url 参数，返回一个函数这个返回的函数接收一个 Post 组件，这是柯里化，也就是 react 常说的无副作用函数，一种输入只有一直输出

```
const loadAndRefresh = url => WrappedComponent => {
  // 具体逻辑
  //...
}
```

## context

这是一个非常邪恶的特性，一个组件只要往 context 放了某个数据，那个这个数据就被其下面的所有子组件共享

### 使用

用`getChildContext`方法往里面放数据。它返回的对象就是 context，可以用`childContextTypes`来限制数据的类型。子组件**必须**使用`contextTypes`来声明和验证你需要获取的 context 的类型。

### 总结

这个东西非常有用，但是也很危险

1.  它增加了组件间的耦合性，打破了 props 传递数据的规范
2.  **context 里面的数据能被随意接触就能被随意修改**
3.  但是它又非常有用，大多数第三方库都是用它来实现功能的，就比如最出名的 redux
4.  所以我们用好 redux 就可以了
